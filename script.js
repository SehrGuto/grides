const checklistData = {
    bonus: {
        title: "Quer Bonus? Então toma bonus!",
        items: [
            {
                title: "Privacy",
                subItems: ["Últimos 4 digitos da conta de anúncios", "Esta ligação pode ser gravada para fins de treinamento e qualidade. Tudo bem?"]
            },
            {
                title: "Call Opening",
                subItems: ["Menção do cargo e a explicação do papel.", "Diferenciação de cargo.", "Validação do objetivo da assessoria.", "Demonstração de conhecimento sobre a conta.", "Agenda do que será realizado na chamada.", "Validação de que o cliente deseja trabalhar algo adicional."]
            },
            {
                title: "Securing Commiments",
                subItems: ["Validou que o anunciante tenha permissões."]
            },
            {
                title: "Discovery & Connection",
                subItems: ["Validar objetivo com o time de MP.", "Perguntas relevantes para conhecer objetivos do anunciante."]
            },
            {
                title: "Taylored Solutions",
                subItems: ["Solução passo a passo", "Como funciona a solução implementada", "Solução implementada com sucesso."]
            },
            {
                title: "Commercial Conversation",
                subItems: ["Conectar a implementação com Objetivos do anunciante", "Estatísticas de implementação do Pro Team Hub", "Fornecer benefícios de retorno ao MP (N/A INC e Mid Market)"]
            },
            {
                title: "Unlocking Opportunities",
                subItems: ["Atender objeções e dúvidas"]
            },
            {
                title: "Call Closing",
                subItems: ["Resumo do que foi feito", "Lembrar assessorias futuras", "Agende uma nova consulta com o MP ou com nosso time (N/A INC ou Mid Market)", "Certifique-se de que não há dúvidas"]
            }
        ]
    },
    checklist1: {
        title: "Guía de Revisión de un anúnciante",
        items: [
            {
                title: "Tiene página web?",
                subItems: ["Revisar pagina web", "Revisar qué plataforma utiliza para el manejo del sitio web", "Revisar si tiene pixel instalado", "Revisar si se puede optimizar el pixel", "Configurar eventos (compra, agregar al carrito, clientes potenciales)", "Activar coincidencias avanzadas", "Verificación del dominio"]
            },
            {
                title: "Tiene API?",
                subItems: ["Revisar si tiene API", "Revisar si se puede optimizar la API", "Puntuación de los eventos inferior a 5 y tiene GTM"]
            },
            {
                title: "Tiene Catálogo?",
                subItems: ["Revisar si tiene catálogo", "Revisar si se puede optimizar el catálogo", "Unificar cátalogos", "Subir el match rate", "Disponibilidad de productos"]
            },
            {
                title: "No tiene pagina Web:",
                subItems: ["Tiene campañas activas?", "Realizar una prueba A/B", "Revisar si se puede realizar un caso de soporte o apelación en UBD"]
            },
            {
                title: "Revisión de la página web:",
                subItems: ["¿Qué tan importante es tu sitio web como canal de ventas?"]
            },
            {
                title: "Plataforma de manejo del sitio web:",
                subItems: ["¿Qué plataforma (Partner) utilizas para gestionar tu sitio web?", "¿Sabes cuáles son los beneficios y limitaciones de tu plataforma actual?"]
            },
            {
                title: "Seguimiento y optimización:",
                subItems: ["¿Cómo sabes si tus visitantes están completando las acciones que deseas en tu sitio web?", "¿Qué tipo de datos te gustaría recopilar sobre tus visitantes y por qué?"]
            },
            {
                title: "Pixel Set Up",
                subItems: ["Estamos de acuerdo en que el sitio web es un canal de ventas y recopilación de datos acerca de tus clientes?"]
            },
            {
                title: "Integración con API",
                subItems: ["¿Qué beneficios crees que podrías obtener al integrar APIs con tu sitio web?"]
            },
            {
                title: "Catálogo de productos",
                subItems: ["¿Cómo gestionas actualmente tu catálogo de productos?", "¿Qué características te gustaría incluir en tu catálogo de productos?"]
            },
            {
                title: "Campañas y pruebas A/B",
                subItems: ["¿Cómo mides el éxito de tus campañas y qué tipo de datos te gustaría recopilar?", "¿Qué elementos de tus campañas publicitarias crees que podrían estar afectando negativamente su rendimiento?", "¿Qué tipo de creatividades o formatos se están utilizando en la campaña y cómo se están desempeñando?"]
            },
            {
                title: "Caso de soporte",
                subItems: ["¿Qué tipo de desafíos o problemas estás enfrentando actualmente en tu negocio?"]
            }
        ]
    },
    checklist2: {
        title: "Soluções de Tech",
        items: [
            {
                title: "Pixel Setup",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            },
            {
                title: "Pixel Optimization",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            },
            {
                title: "API Setup",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            },
            {
                title: "API Optimization",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            },
            {
                title: "API - CRM",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            }
        ]
    },
    checklist3: {
        title: "Soluções de Creative",
        items: [
            {
                title: "Major Item 1",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            },
            {
                title: "Major Item 2",
                subItems: ["Sub Item 1", "Sub Item 2", "Sub Item 3"]
            }
        ]
    },
    checklist4: {
        title: "Soluções de Measurement",
        items: [
            {
                title: "Teste A/B",
                subItems: ["Verificar Experimentos", "Mesmo orçamento", "Só 1 variável", "Até 5 campanhas/conj. anúncios", "Verificar Objetivos", "Programar para o mesmo dia"]
            },
            {
                title: "Relatório de Anúncios",
                subItems: ["Campanhas Activas", "Estar vivo", "Todo Aplica"]
            },
            {
                title: "Brand Lift",
                subItems: ["40.000 UDS /227000 R (Trimestre)", "Accelerate +", "Test A/B (preferiblemente)", "Nome da página coincide con a marca"]
            },
            {
                title: "Conversion Lift",
                subItems: ["API optimizada", "42.000 UDS /238000 R (Timestre)", "Accelerate +", "Test A/B (preferiblemente)", "Nome da página coincide con a marca"]
            },
            {
                title: "Let's Talk Cross Media",
                subItems: ["Requisito 1", "Requisito 2", "Requisito 3"]
            }
        ]
    },
    checklist5: {
        title: "Formulario de Teste"
    }    
};

const infoData = {
    bonus: [
        {
            title: "Legal Disclosure",
            content: "Esta ligação pode ser gravada para fins de treinamento e qualidade. Você pode pedir para não receber mais ligações do time de Marketing a qualquer momento. Tudo bem?"
        },
        {
            title: "Securing Commitments",
            content: "Securing commitments involves getting the client's agreement on key points. This helps ensure that both parties are aligned on expectations and next steps."
        },
        {
            title: "Discovery & Connection",
            content: "This phase is about understanding the client's needs and building rapport. Ask open-ended questions and actively listen to their responses."
        },
        {
            title: "Taylored Solutions/Unlocking opportunities",
            content: "Based on the information gathered, present solutions that are tailored to the client's specific needs. Highlight the benefits and value proposition of each solution."
        },
        {
            title: "Implementation",
            content: "Guide the client through the implementation process. Be clear about what steps need to be taken and offer support throughout the process."
        },
        {
            title: "Call Closing",
            content: "Summarize the key points discussed, confirm any actions or next steps, and thank the client for their time. Ensure they know how to reach you if they have any questions."
        }
    ],    
    checklist2: [
        {
            title: "Pixel Setup",
            content: "Adicionar Commercial"
        },
        {
            title: "Pixel Optimization",
            content: "Adicionar Commercial"
        },
        {
            title: "API Setup",
            content: "Adicionar Commercial"
        },
        {
            title: "API Optimization",
            content: "Adicionar Commercial"
        },
        {
            title: "API - CRM",
            content: "Adicionar Commercial"
        }
    ],

    checklist4: [
        {
            title: "Teste A/B",
            content: "Adicionar Commercial"
        },
        {
            title: "Relatório de Anúncios",
            content: "Adicionar Commercial"
        },
        {
            title: "Brand Lift",
            content: "Adicionar Commercial"
        },
        {
            title: "Conversion Lift",
            content: "Adicionar Commercial"
        },
        {
            title: "Let's talk Cross Media",
            content: "Adicionar Commercial"
        }
    ],
};

const checklist = document.getElementById('bonusChecklist');
const checklistTitle = document.getElementById('checklistTitle');
const buttons = document.querySelectorAll('.checklist-button');

function createChecklist(checklistItems) {
    checklist.innerHTML = ''; 
    checklistItems.forEach((item, index) => {
        const li = document.createElement('li');
        li.classList.add('major-item');
        
        const majorLabel = document.createElement('label');
        majorLabel.htmlFor = `major-${index}`;
        
        const majorCheckbox = document.createElement('input');
        majorCheckbox.type = 'checkbox';
        majorCheckbox.id = `major-${index}`;
        
        majorLabel.textContent = item.title;
        majorLabel.insertBefore(majorCheckbox, majorLabel.firstChild);
        
        const checkmark = document.createElement('i');
        checkmark.classList.add('fas', 'fa-check', 'checkmark');
        li.appendChild(checkmark);
        
        const subList = document.createElement('ul');
        subList.classList.add('sub-items');
        
        item.subItems.forEach((subItem, subIndex) => {
            const subLi = document.createElement('li');
            subLi.classList.add('sub-item');
            
            const subLabel = document.createElement('label');
            subLabel.htmlFor = `sub-${index}-${subIndex}`;
            
            const subCheckbox = document.createElement('input');
            subCheckbox.type = 'checkbox';
            subCheckbox.id = `sub-${index}-${subIndex}`;
            
            subLabel.textContent = subItem;
            subLabel.insertBefore(subCheckbox, subLabel.firstChild);
            
            subLi.appendChild(subLabel);
            subList.appendChild(subLi);
            
            subCheckbox.addEventListener('change', () => {
                updateMajorItemStatus(li, item.subItems.length);
            });
        });
        
        majorCheckbox.addEventListener('change', (e) => {
            const subCheckboxes = subList.querySelectorAll('input[type="checkbox"]');
            subCheckboxes.forEach(checkbox => {
                checkbox.checked = e.target.checked;
            });
            updateMajorItemStatus(li, item.subItems.length);
        });
        
        li.appendChild(majorLabel);
        li.appendChild(subList);
        checklist.appendChild(li);

        const infoButton = document.createElement('button');
        infoButton.textContent = 'Info';
        infoButton.classList.add('info-button');
        infoButton.addEventListener('click', () => showInfo(index));
        li.appendChild(infoButton);

        li.appendChild(majorLabel);
        li.appendChild(subList);
        checklist.appendChild(li);
    });
}

function showInfo(index) {
    const infoContainer = document.getElementById('infoContainer');
    const infoTitle = document.getElementById('infoTitle');
    const infoContent = document.getElementById('infoContent');
    
    const currentChecklist = document.querySelector('.checklist-button.active').dataset.checklist;
    const info = infoData[currentChecklist][index];
    
    infoTitle.textContent = info.title;
    infoContent.textContent = info.content;
    
    infoContainer.style.display = 'block';
}

// Add event listener to close info box when clicking outside
document.addEventListener('click', (event) => {
    const infoContainer = document.getElementById('infoContainer');
    const infoButtons = document.querySelectorAll('.info-button');
    
    if (!infoContainer.contains(event.target) && !Array.from(infoButtons).some(button => button.contains(event.target))) {
        infoContainer.style.display = 'none';
    }
});

function updateMajorItemStatus(majorItem, totalSubItems) {
    const checkedSubItems = majorItem.querySelectorAll('.sub-item input[type="checkbox"]:checked').length;
    const majorCheckbox = majorItem.querySelector('input[type="checkbox"]');
    const checkmark = majorItem.querySelector('.checkmark');
    
    if (checkedSubItems === totalSubItems) {
        majorCheckbox.checked = true;
        checkmark.classList.add('visible');
    } else {
        majorCheckbox.checked = false;
        checkmark.classList.remove('visible');
    }
}

function loadChecklist(checklistKey) {
    const data = checklistData[checklistKey];
    checklistTitle.textContent = data.title;
    createChecklist(data.items);
    
    buttons.forEach(button => {
        button.classList.remove('active');
        if (button.dataset.checklist === checklistKey) {
            button.classList.add('active');
        }
    });
}

buttons.forEach(button => {
    button.addEventListener('click', () => {
        const checklistKey = button.dataset.checklist;
        if (checklistKey === 'checklist5') {
            // Redirect to the contact form page
            window.location.href = 'alunos.html';
        } else {
            // Load normal checklist
            loadChecklist(checklistKey);
        }
    });
});

// Load the default checklist (bonus) on page load
loadChecklist('bonus');